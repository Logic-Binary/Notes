
### 进程是如何建立的
- 创建一个独立的虚拟地址空间
	可执行文件是以segement为单位，操作系统以页为单位，创建控件实际上是创建函数所需要的相应的数据结构，创建虚拟地址空间实际上只要分配一个页目录即可，甚至不用映射关系，这些关系到后面程序发生页错误可以再进行设置。

- 读取可执行文件头，建立映射关系
	上一步映射关系函数是把虚拟地址转换为物理地址，这一步的映射关系是虚拟地址与可执行文件的映射关系

- 将CPU指令寄存器设置为可执行文件的入口，启动运行

### 页错误
   上面的步骤完成之后，可执行文件的指令和数据都没有被装入到内存中，操作系统只是通过可以执行文件头部信息建立起可执行文件和进程虚拟内存之间的关系。
   假设在上面的例子中，程序入口地址为0x08048000,刚好是.text段的起始地址。当CPU开始打算执行这个地址的指令时，发现0x8048000-0x8049000是个空页，便触发页异常。CPU将控制权交给操作系统，操作系统分配物理页，建立虚拟页与物理页的映射关系，重新执行。

当我们站在操作系统装载可执行文件的角度上去看，可以为发现它并不关心可执行文件各个段所包含的实际内容，只关心段权限(可读，可写，可执行)。ELF中，基本是三种权限组合
- 以代码段为代表的权限为可读可执行的段
- 以数据段和BSS段为代表的权限为可读可写的段
- 以只读数据段为代表的权限为只读的段
于是有了一个很简单的方案：对于相同权限的段，把它们合并到一起当作一个段进行映射。